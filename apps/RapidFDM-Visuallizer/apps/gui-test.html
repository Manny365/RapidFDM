<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>GUI-Test-Background</title>

    <link rel="stylesheet" type="text/css" href="../static/jquery-ui-1.12.0.custom/jquery-ui.min.css"/>


    <script src="../static/js/three.js"></script>
    <script src="../static/js/ImprovedNoise.js"></script>
    <script src="../static/js/CanvasRenderer.js"></script>
    <script src="../static/js/Projector.js"></script>
    <script src='../static/js/stats.min.js'></script>
    <script src="../static/js/OrbitControls.js"></script>
    <script src="../static/js/TextGeometry.js"></script>
    <script src="../static/js/FontUtils.js"></script>
    <script src="../static/js/helvetiker_regular.typeface.js"></script>
    <script src="js/DroneDisplayCameraController.js"></script>
    <script src="js/DroneDisplayEngine.js"></script>
    <script src="js/AirfoilLoader.js"></script>
    <script src="js/configurer_driver.js"></script>
    <script src="js/components_geometry_loader.js"></script>
    <link rel="stylesheet" type="text/css" href="css/editor-ui.css"/>

    <script src="../static/js/jquery-1.11.3.min.js" type="text/javascript"></script>

</head>
<body>
<div id="container">
</div>
<div id="logs">
    <textarea id="log_plant" readonly="readonly"></textarea>
</div>
<button onclick="list_model()" id="list_model_button">List model</button>
<button onclick="load_model()" id="load_model_button">Load model</button>
<button id="list_axis_model_button">List Axis</button>
<button id="get_total_forces_torques_button">Debug</button>
<!--<input  type="range" id="wind_aoa_input" min="-45" max="45"/>-->
<div id="wind_aoa_input"></div>

<script src="js/aircraft_view.js"></script>
<script>
    document.documentElement.style.overflow = 'hidden';
    $(document).ready(function () {

        window.log = function (msg) {
            var d = new Date();
            var new_msg = `[${d.toLocaleTimeString()}] ${msg}`;
            var textarea = $("#log_plant");
            textarea.text(textarea.text() + new_msg + "\n");
            textarea.scrollTop(textarea[0].scrollHeight);
        };

        var dis = new DroneDisplayEngine(document.getElementById("container"),
                window.innerWidth, window.innerHeight);
        DroneDisplayEngine.animate(dis);

        var con = new ConfigurerDriver(load_model);

        function list_model() {
            con.list_model(function (data) {
                log(`model list ${JSON.stringify(data)}`);
            });
        }

        var aircraftview = 0;

        function load_model() {
            log("Load model");
            aircraftview = new AircraftView({
                driver: con,
                dis: dis,
                scale: 0.5,
                name: "sample_aircraft"
            });
        }

        var sliderOpts = {
            change: function () {
//                log("change");
            },
            min: -15,
            max: 15,
            value : 0,
            slide: function (e,ui) {
                aircraftview.set_wind_speed(25,ui.value);
                log(`set wind speed to ${ui.value}`);
            }
//            start: function () {
//            },
//            stop: function () {
//            }
        };
        $("#wind_aoa_input").slider(sliderOpts);

    });


</script>

<script src="../static/jquery-ui-1.12.0.custom/jquery-ui.js" type="text/javascript"></script>

</body>
</html>